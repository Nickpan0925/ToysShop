(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52af87d6"],{1799:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"pagination"},[a("li",[t.pagination.has_pre?a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.pageHandler(t.toPage-1)}}},[t._v("«")]):t._e()]),t._l(t.pagination.total_pages,(function(e){return a("li",{key:e},[a("a",{class:{active:e===t.pagination.current_page},attrs:{href:"javascript:;"},on:{click:function(a){return t.pageHandler(e)}}},[t._v(t._s(e))])])})),a("li",[t.pagination.has_next?a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.pageHandler(t.toPage+1)}}},[t._v("»")]):t._e()]),a("li",[a("form",{attrs:{action:""}},[a("span",[t._v("共"+t._s(t.pagination.total_pages)+"頁，到第")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.toPage,expression:"toPage"}],attrs:{type:"number",max:t.pagination.total_pages,min:"1",value:"2"},domProps:{value:t.toPage},on:{input:function(e){e.target.composing||(t.toPage=e.target.value)}}}),a("span",[t._v("頁")]),a("input",{staticClass:"btn",attrs:{type:"button",value:"確定"},on:{click:function(e){return t.pageHandler(t.toPage)}}})])])],2)},o=[],n={data:function(){return{toPage:1}},props:["pagination"],methods:{pageHandler:function(t){var e=this;e.toPage=t,this.$emit("pageChange",1*e.toPage)}}},r=n,c=(a("bfff"),a("2877")),s=Object(c["a"])(r,i,o,!1,null,"04e25f26",null);e["a"]=s.exports},"350b":function(t,e,a){},"372d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.modalOpen?a("Modal",{attrs:{active:t.modalOpen,editProduct:t.editProduct,isNew:t.isNew,resetFn:t.getProduct},on:{"update:active":function(e){t.modalOpen=e}}}):t._e(),t.lodaing?a("Loading"):t._e(),a("div",{staticClass:"products-wrapper"},[a("div",{staticClass:"topbar"},[a("span",{staticClass:"title"},[t._v("產品控制台"),a("span",{staticClass:"mark"},[t._v("共"+t._s(t.ProductsLength)+"件產品")])]),a("button",{staticClass:"btn",on:{click:function(e){return t.modalHandler(!0)}}},[a("i",{staticClass:"fas fa-edit"}),t._v("新增產品")])]),a("div",{staticClass:"cotainer"},[a("table",{staticClass:"products-list"},[t._m(0),a("tbody",t._l(t.products,(function(e){return a("tr",{key:e.id},[a("td",{attrs:{"data-label":"分類"}},[t._v(t._s(e.category))]),a("td",{attrs:{"data-label":"產品名稱"}},[t._v(t._s(e.title))]),a("td",{attrs:{"data-label":"原價"}},[t._v(t._s(t._f("currency")(e.origin_price)))]),a("td",{attrs:{"data-label":"售價"}},[t._v(t._s(t._f("currency")(e.price)))]),a("td",{attrs:{"data-label":"是否啟用"}},[e.is_enabled?a("span",[t._v("是")]):a("span",[t._v("否")])]),a("td",{attrs:{"data-label":"編輯"}},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"edit",on:{click:function(a){return t.modalHandler(!1,e)}}},[t._v("編輯")]),a("button",{staticClass:"delete",on:{click:function(a){return t.removeHandler(e.id)}}},[t._v("刪除")])])])])})),0)]),a("div",{staticClass:"nav-bar"},[a("Pagination",{attrs:{pagination:t.pagination},on:{pageChange:t.pageChange}})],1)])])],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("分類")]),a("th",[t._v("產品名稱")]),a("th",[t._v("原價")]),a("th",[t._v("售價")]),a("th",[t._v("是否啟用")]),a("th",[t._v("編輯")])])])}],n=(a("99af"),a("b64b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal-wrapper"},[t.loading?a("Loading"):t._e(),a("form",{staticClass:"modal"},[a("div",{staticClass:"modal-title"},[a("span",[t._v("新增產品")]),a("a",{attrs:{href:"javascript:;"},on:{click:t.closeHandelr}},[a("i",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"modal-content"},[a("div",{staticClass:"img-row"},[a("div",{staticClass:"field-wrap"},[a("label",{attrs:{for:"imgurl"}},[t._v("輸入圖片網址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],attrs:{type:"text",id:"imgurl",name:"imgurl",placeholder:"輸入圖片網址"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"imageUrl",e.target.value)}}})]),a("div",{staticClass:"field-wrap"},[a("label",{attrs:{for:"img"}},[t._v("或上傳圖片")]),a("input",{ref:"files",attrs:{type:"file",id:"img",name:"img"},on:{change:t.uploadImg}})]),a("div",{staticClass:"img-cotainer"},[a("img",{attrs:{src:t.tempProduct.imageUrl}})])]),a("div",{staticClass:"product-row"},[a("div",{staticClass:"field-wrap"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],attrs:{type:"text",id:"title",name:"title",placeholder:"輸入圖片網址"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}})]),a("div",{staticClass:"field-wrap"},[a("label",{attrs:{for:"category"}},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],attrs:{type:"text",id:"category",name:"category",placeholder:"輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"category",e.target.value)}}}),a("label",{attrs:{for:"unit"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],attrs:{type:"text",id:"unit",name:"unit",placeholder:"輸入圖片單位"},domProps:{value:t.tempProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"unit",e.target.value)}}})]),a("div",{staticClass:"field-wrap "},[a("label",{attrs:{for:"original__price"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],attrs:{type:"text",id:"original__price",name:"original__price",placeholder:"輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"origin_price",e.target.value)}}}),a("label",{attrs:{for:"price"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],attrs:{type:"text",id:"price",name:"price",placeholder:"輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}})]),a("div",{staticClass:"field-wrap"},[a("label",{attrs:{for:"description"}},[t._v("產品描述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],attrs:{name:"description",id:"description",cols:"20",rows:"5"},domProps:{value:t.tempProduct.description},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"description",e.target.value)}}})]),a("div",{staticClass:"field-wrap"},[a("label",{attrs:{for:"message"}},[t._v("說明內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],attrs:{name:"message",id:"message",cols:"20",rows:"5"},domProps:{value:t.tempProduct.content},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"content",e.target.value)}}})]),a("div",{staticClass:"field-wrap"},[a("label",{attrs:{for:"enable"}},[t._v("是否啟用")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.is_enabled,expression:"tempProduct.is_enabled"}],attrs:{type:"checkbox",name:"enable",id:"enable","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.tempProduct.is_enabled)?t._i(t.tempProduct.is_enabled,null)>-1:t._q(t.tempProduct.is_enabled,"1")},on:{change:function(e){var a=t.tempProduct.is_enabled,i=e.target,o=i.checked?"1":"0";if(Array.isArray(a)){var n=null,r=t._i(a,n);i.checked?r<0&&t.$set(t.tempProduct,"is_enabled",a.concat([n])):r>-1&&t.$set(t.tempProduct,"is_enabled",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.tempProduct,"is_enabled",o)}}})]),a("button",{staticClass:"update-btn",on:{click:function(e){return e.preventDefault(),t.updateProduct()}}},[t._v("確認")])])])])],1)])}),r=[],c={data:function(){return{tempProduct:{},loading:!1}},props:["active","editProduct","isNew","resetFn"],methods:{closeHandelr:function(){this.$emit("update:active",!this.active)},uploadImg:function(){var t=this.$refs.files.files[0],e=new FormData;e.append("file-to-upload",t);var a=this,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("pan_0925","/admin/upload");a.loading=!0,this.$http.post(i,e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){t.data.success?(a.$set(a.tempProduct,"imageUrl",t.data.imageUrl),a.loading=!1):(alert("檔案格式錯誤"),a.loading=!1)}))},updateProduct:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("pan_0925","/admin/product"),a="post",i=t.tempProduct.id;t.loading=!0,t.isNew||(e="".concat("https://vue-course-api.hexschool.io","/api/").concat("pan_0925","/admin/product/").concat(i),a="put"),this.$http[a](e,{data:t.tempProduct}).then((function(e){t.closeHandelr(),t.resetFn(),t.loading=!1}))}},created:function(){var t=this;t.isNew?t.tempProduct={}:t.tempProduct=t.editProduct}},s=c,d=(a("6b7a"),a("2877")),l=Object(d["a"])(s,n,r,!1,null,"ce5c2e0c",null),u=l.exports,p=a("1799"),m={data:function(){return{modalOpen:!1,editProduct:{},products:[],ProductsLength:"",lodaing:!1,isNew:!1,pagination:{}}},components:{Modal:u,Pagination:p["a"]},methods:{modalHandler:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this;a.modalOpen=!0,a.editProduct=Object.assign({},e),a.isNew=t},getProduct:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("pan_0925","/admin/products?page=").concat(e),i=this;i.lodaing=!0,this.$http.get(a).then((function(e){i.pagination=e.data.pagination,i.products=e.data.products,t.allProduct(),i.lodaing=!1}))},allProduct:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("pan_0925","/admin/products/all"),e=this;e.lodaing=!0,this.$http.get(t).then((function(t){e.ProductsLength=Object.keys(t.data.products).length}))},removeHandler:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("pan_0925","/admin/product/").concat(t),i=this;i.lodaing=!0,this.$http.delete(a).then((function(t){e.getProduct(),i.lodaing=!1}))},pageChange:function(t){this.getProduct(t)}},created:function(){this.getProduct(),this.allProduct()}},v=m,g=(a("bd31"),Object(d["a"])(v,i,o,!1,null,"7c6dc3c9",null));e["default"]=g.exports},"6b7a":function(t,e,a){"use strict";a("72aa")},"72aa":function(t,e,a){},8418:function(t,e,a){"use strict";var i=a("c04e"),o=a("9bf2"),n=a("5c6c");t.exports=function(t,e,a){var r=i(e);r in t?o.f(t,r,n(0,a)):t[r]=a}},"99af":function(t,e,a){"use strict";var i=a("23e7"),o=a("d039"),n=a("e8b5"),r=a("861d"),c=a("7b0b"),s=a("50c4"),d=a("8418"),l=a("65f0"),u=a("1dde"),p=a("b622"),m=a("2d00"),v=p("isConcatSpreadable"),g=9007199254740991,f="Maximum allowed index exceeded",h=m>=51||!o((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),_=u("concat"),P=function(t){if(!r(t))return!1;var e=t[v];return void 0!==e?!!e:n(t)},b=!h||!_;i({target:"Array",proto:!0,forced:b},{concat:function(t){var e,a,i,o,n,r=c(this),u=l(r,0),p=0;for(e=-1,i=arguments.length;e<i;e++)if(n=-1===e?r:arguments[e],P(n)){if(o=s(n.length),p+o>g)throw TypeError(f);for(a=0;a<o;a++,p++)a in n&&d(u,p,n[a])}else{if(p>=g)throw TypeError(f);d(u,p++,n)}return u.length=p,u}})},bd31:function(t,e,a){"use strict";a("e0e7")},bfff:function(t,e,a){"use strict";a("350b")},e0e7:function(t,e,a){}}]);
//# sourceMappingURL=chunk-52af87d6.f8367d34.js.map